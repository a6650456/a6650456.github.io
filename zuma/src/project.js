require=function e(t,l,i){function a(c,o){if(!l[c]){if(!t[c]){var s="function"==typeof require&&require;if(!o&&s)return s(c,!0);if(n)return n(c,!0);var r=new Error("Cannot find module '"+c+"'");throw r.code="MODULE_NOT_FOUND",r}var u=l[c]={exports:{}};t[c][0].call(u.exports,function(e){var l=t[c][1][e];return a(l||e)},u,u.exports,e,t,l,i)}return l[c].exports}for(var n="function"==typeof require&&require,c=0;c<i.length;c++)a(i[c]);return a}({animEventMgr:[function(e,t,l){"use strict";cc._RF.push(t,"bfa1a029vZAiKdnQp1yjshl","animEventMgr"),cc.Class({extends:cc.Component,properties:{},pauseGame:function(){cc.director.pause()},recoverGame:function(){}}),cc._RF.pop()},{}],ballMgr:[function(e,t,l){"use strict";cc._RF.push(t,"7c345YVfvJJCqxmCw/rJnxG","ballMgr");var i=e("global");cc.Class({extends:cc.Component,properties:{pathlist:{default:[],serializable:!1},initmarble:-1,finishmarble:-1,ballPerfab:cc.Prefab,ballList:[cc.Prefab],ballCount:0,insertBlIndex:-1,clearTime:0,clearBallCount:0,ballScore:10},start:function(){this.insertBlIndex=-1,cc.director.getCollisionManager().enabled=!0,this.readJson(),this.schedule(this.isComplete,.5)},isComplete:function(){this.ballCount>=this.finishmarble&&0==this.ballList.length&&(this.unschedule(this.isComplete),this.node.getComponent("gameMgr").showComplete())},update:function(e){this.judgeInsertBlIndex()},judgeInsertBlIndex:function(){if(this.insertBlIndex>0&&this.ballList[this.insertBlIndex].getComponent("ball").ballStep===this.ballList[this.insertBlIndex-1].getComponent("ball").ballStep){if(1==this.clearTime)for(var e=this.insertBlIndex-1;e>=0;--e){(l=this.ballList[e].getComponent("ball")).moveBall()}if(this.clearTime>1){for(var t=this.insertBlIndex-1;t<this.ballList.length-1;++t){var l=this.ballList[t].getComponent("ball"),i=this.ballList[t+1].getComponent("ball"),a=l.ballStep-1;i.ballStep=a}this.ballList.forEach(function(e){e.stopAllActions(),e.getComponent("ball").moveBall()})}this.insertBlIndex=-1,this.clearTime=0}},addBallMotionPath:function(e,t){e.getComponent("ball");(this.ballList.splice(t.curIndex+1,0,e),this.ballList.forEach(function(e){e.stopAllActions()}),i.isSoundPlay)&&(o=cc.find("gameMgr").getComponent("gameMgr")).playCollision();this.insertBlIndex=t.curIndex+1;for(var l=0;l<this.ballList.length-1;++l){var a=this.ballList[l].getComponent("ball").ballStep-1,n=this.ballList[l+1].getComponent("ball");n.ballStep=a,n.curIndex=l+1}if(this.clearBallWithColor(),this.clearTime>0){var c=cc.find("effectMgr").getComponent("effectMgr"),o=cc.find("gameMgr").getComponent("gameMgr"),s=this.clearBallCount*this.ballScore;c.playScoreEf(this.ballList[this.insertBlIndex].getPosition(),s),o.setScoreLabel(s),this.clearBallCount=0;for(var r=this.insertBlIndex;r<this.ballList.length;r++){this.ballList[r].getComponent("ball").curIndex=r}}else this.clearTime=0,this.insertBlIndex=-1;this.setBallAction()},setBallAction:function(){if(this.clearTime>1)for(var e=0;e<this.ballList.length;e++){this.ballList[e].getComponent("ball").clearBallsMove(.1,this.insertBlIndex)}else for(e=0;e<this.ballList.length;e++){this.ballList[e].getComponent("ball").addBallMove(.2,this.insertBlIndex)}},clearBallWithColor:function(){for(var e=this.ballList[this.insertBlIndex].getComponent("ball").color,t=[],l=this.insertBlIndex-1;l>=0;--l){if(this.ballList[l].getComponent("ball").color!==e)break;t.push(l)}t.reverse(),t.push(this.insertBlIndex);for(l=this.insertBlIndex+1;l<this.ballList.length;++l){if(this.ballList[l].getComponent("ball").color!==e)break;t.push(l)}if(t.length>=3){for(var i=t.length-1;i>=0;--i){var a=this.ballList[t[i]];this.insertBlIndex=t[i],this.ballList.splice(t[i],1),cc.find("effectMgr").getComponent("effectMgr").playClearBallEf(a.getPosition(),a.getComponent("ball").color),this.clearBallCount++,a.destroy()}this.clearTime++,this.clearBallWithColor()}},initBall:function(){for(var e=0;e<this.initmarble;++e)this.creatBall(this.initmarble-e-1)},creatBall:function(e){var t=cc.instantiate(this.ballPerfab);this.node.addChild(t),this.ballList.push(t);var l=t.getComponent("ball"),i=this.ballList.length-1;return l.initData(this.pathList,i,e),this.ballCount++,t},stopAllBallAction:function(){this.ballList.forEach(function(e){e.stopAllActions()})},readJson:function(){var e=this;cc.loader.loadRes("data/lv"+i.curLevel,function(t,l){var i=l.rail0;e.pathList=i;var a=l.engine;e.initmarble=a.initmarble,e.finishmarble=a.finishmarble,e.initBall()})}}),cc._RF.pop()},{global:"global"}],ball:[function(e,t,l){"use strict";cc._RF.push(t,"50985j4jZVJMa5fH7mYZ/YH","ball");var i=cc.Enum({ball_blue:0,ball_green:1,ball_orange:2,ball_purple:3,ball_red:4,ball_yellow:5});cc.Class({extends:cc.Component,properties:{marblesAltas:{default:null,type:cc.SpriteAtlas},color:{default:i.ball_blue,type:i,visible:!1},pathList:[],ballStep:0,moveSpeed:.6,curIndex:-1,initStep:-1},start:function(){this.moveSpeed=.6,this.ballStep=0},initData:function(e,t,l){this.curIndex=t,this.initStep=l,Object.assign(this.pathList,e);var i=this.pathList[0];this.node.setPosition(i),this.setBallPic(),this.moveBall()},setBallPic:function(){var e=this.getComponent(cc.Sprite);this.color=parseInt(6*Math.random());var t="";switch(this.color){case i.ball_blue:e.spriteFrame=this.marblesAltas.getSpriteFrame("blue_ball1"),t="blue";break;case i.ball_green:e.spriteFrame=this.marblesAltas.getSpriteFrame("green_ball1"),t="green";break;case i.ball_orange:e.spriteFrame=this.marblesAltas.getSpriteFrame("orange_ball1"),t="orange";break;case i.ball_purple:e.spriteFrame=this.marblesAltas.getSpriteFrame("purple_ball1"),t="purple";break;case i.ball_red:e.spriteFrame=this.marblesAltas.getSpriteFrame("red_ball1"),t="red";break;case i.ball_yellow:e.spriteFrame=this.marblesAltas.getSpriteFrame("yellow_ball1"),t="yellow"}this.addAnimtion(t)},addAnimtion:function(e){for(var t=this.getComponent(cc.Animation),l=[],i=1;i<21;++i){var a=e+"_ball"+i,n=this.marblesAltas.getSpriteFrame(a);l.push(n)}var c=cc.AnimationClip.createWithSpriteFrames(l,20);c.name="run",c.wrapMode=cc.WrapMode.Loop,t.addClip(c),t.play("run")},moveBall:function(){var e=0,t=this.getNextPos(),l=cc.find("gameMgr").getComponent("ballMgr");if(null==t)return l.stopAllBallAction(),void cc.find("gameMgr").getComponent("gameMgr").showFaild();l.ballCount<=l.finishmarble&&this.curIndex==l.ballList.length-1&&(2==this.ballStep&&l.creatBall(0),this.ballStep>2&&(l.creatBall(1),l.creatBall(0))),this.ballStep<=this.initStep?e=(.05-.001*this.initStep).toFixed(3):(e=this.moveSpeed,this.initStep=-1);var i=cc.moveTo(e,t),a=cc.callFunc(this.moveBall,this),n=cc.sequence(i,a);this.node.runAction(n)},moveBallBack:function(){var e=this.getBackPos();if(null!=e){var t=cc.moveTo(.2,e),l=cc.callFunc(this.moveBallBack,this),i=cc.sequence(t,l);this.node.runAction(i)}},addBallMove:function(e,t){var l=this.getNextPos(),i=cc.moveTo(e,l);if(this.curIndex>=t){var a=cc.callFunc(this.moveBall,this),n=cc.sequence(i,a);this.node.runAction(n)}else this.node.runAction(i)},clearBallsMove:function(e,t){var l=this.getNextPos(),i=cc.moveTo(e,l);if(this.curIndex<t){var a=cc.callFunc(this.moveBallBack,this),n=cc.sequence(i,a);this.node.runAction(n)}else this.node.runAction(i)},getBackPos:function(){return this.ballStep=this.ballStep-1,this.pathList[this.ballStep]},getNextPos:function(){return this.ballStep=this.ballStep+1,this.pathList[this.ballStep]},onCollisionEnter:function(e,t){999===e.tag&&999!=t.tag&&(e.tag=0,cc.find("gameMgr").getComponent("ballMgr").addBallMotionPath(e.node,this))}}),cc._RF.pop()},{}],btnMgr:[function(e,t,l){"use strict";cc._RF.push(t,"394d9RTWkZEg7HJMptWzgBh","btnMgr");var i=e("global");cc.Class({extends:cc.Component,properties:{},start:function(){cc.director.preloadScene("mainGame",function(e){e&&cc.log(e)})},endGameClick:function(){cc.director.end()},soundClick:function(e,t){i.isSoundPlay=!i.isSoundPlay;var l=e.currentTarget.getComponent(cc.Button);cc.log(l),cc.loader.loadRes("buttons",cc.SpriteAtlas,function(e,t){i.isSoundPlay?(l.normalSprite=t.getSpriteFrame("sound_btn"),l.hoverSprite=t.getSpriteFrame("sound_btn_h")):(l.normalSprite=t.getSpriteFrame("no_sound_btn"),l.hoverSprite=t.getSpriteFrame("no_sound_btn_h"))})},musicClick:function(e,t){i.isBkPlay=!i.isBkPlay;var l=e.currentTarget.getComponent(cc.Button);cc.loader.loadRes("buttons",cc.SpriteAtlas,function(e,t){i.isBkPlay?(l.normalSprite=t.getSpriteFrame("music_btn"),l.hoverSprite=t.getSpriteFrame("music_btn_h"),cc.audioEngine.resume(i.bkMusicId)):(l.normalSprite=t.getSpriteFrame("no_music_btn"),l.hoverSprite=t.getSpriteFrame("no_music_btn_h"),cc.audioEngine.pause(i.bkMusicId))})},adventureClick:function(){cc.director.loadScene("selectGame")},selectClick:function(e,t){i.curLevel=t,cc.director.loadScene("mainGame")},pauseClick:function(){cc.find("pause").getComponent(cc.Animation).play("pause_1")},continueClick:function(){cc.director.resume(),cc.find("pause").getComponent(cc.Animation).play("pause_2")},restartClick:function(){cc.director.loadScene("mainGame"),cc.director.resume()},menuClick:function(){cc.director.resume(),cc.director.loadScene("menuGame")},nextClick:function(){i.curLevel++,i.curLevel>3||(cc.director.resume(),cc.director.loadScene("menuGame"))}}),cc._RF.pop()},{global:"global"}],effectMgr:[function(e,t,l){"use strict";cc._RF.push(t,"25de7f3W3RKHo2mX6Dz4zua","effectMgr"),cc.Class({extends:cc.Component,properties:{effect:cc.Prefab,scoreEf:cc.Node},start:function(){},clearEffect:function(){},playClearBallEf:function(e,t){var l=cc.instantiate(this.effect);this.node.addChild(l);var i=l.getComponent(cc.Animation);l.setPosition(e);var a="boom_";switch(t){case 0:a+="blue";break;case 1:a+="green";break;case 2:a+="orange";break;case 3:a+="purple";break;case 4:a+="red";break;case 5:a+="yellow"}i.play(a)},playScoreEf:function(e,t){this.scoreEf.setPosition(e),this.scoreEf.getComponent(cc.Label).string="+ "+t;var l=cc.moveBy(1,cc.v2(0,80)),i=cc.callFunc(this.removeScore,this),a=cc.sequence(l,i);this.scoreEf.runAction(a)},removeScore:function(){this.scoreEf.setPosition(-100,-100)}}),cc._RF.pop()},{}],effect:[function(e,t,l){"use strict";cc._RF.push(t,"deb526yspxIXZUoFbPqo0rW","effect"),cc.Class({extends:cc.Component,properties:{},clearEffect:function(){this.node.destroy()}}),cc._RF.pop()},{}],frogMgr:[function(e,t,l){"use strict";cc._RF.push(t,"3546fOYL6NKqLRQwo2IhLwC","frogMgr"),cc.Class({extends:cc.Component,properties:{playerPrefab:{default:null,type:cc.Prefab},pathlist:{default:[],serializable:!1},curPlayerBall:cc.Prefab,bfPlayerBall:cc.Prefab,curShowIndex:0,maxBallCount:1,ballSpeed:-1},start:function(){this.ballSpeed=.8,this.readJson()},creatPlayerBall:function(){this.curPlayerBall=cc.instantiate(this.playerPrefab),this.node.parent.addChild(this.curPlayerBall),this.curPlayerBall.setPosition(this.node.x+3,this.node.y+1);var e=this.curPlayerBall.getComponent(cc.BoxCollider);this.curPlayerBall.getComponent("ball").setBallPic(),this.curPlayerBall.getComponent("ball").pathList=this.pathList,e.tag=999},sendBall:function(e){this.bfPlayerBall=this.curPlayerBall,this.creatPlayerBall();var t=this.bfPlayerBall.getPosition(),l=t.x-e.x,i=t.y-e.y,a=t.x-3*l,n=t.y-3*i;e=cc.v2(a,n);var c=cc.moveTo(this.ballSpeed,e),o=cc.callFunc(this.clearPlaerBall,this),s=cc.sequence(c,o);this.bfPlayerBall.runAction(s)},clearPlaerBall:function(){this.bfPlayerBall.destroy()},readJson:function(){var e=this;cc.loader.loadRes("data/lv1",function(t,l){var i=l.frog;e.node.setPosition(i.x0,i.y0);var a=l.rail0;e.pathList=a,e.creatPlayerBall()})}}),cc._RF.pop()},{}],gameMgr:[function(e,t,l){"use strict";cc._RF.push(t,"66df3IWGKtHH493zj1Dgp/U","gameMgr");var i=e("global");cc.Class({extends:cc.Component,properties:{targetScore:{default:-1,visible:!1},score:0,scoreLabel:{default:null,type:cc.Node},timeBar:{default:null,type:cc.ProgressBar},timeLabel:{default:null,type:cc.Label},shoot:{default:null,url:cc.AudioClip},collision:{default:null,url:cc.AudioClip},maxSec:100,showFaildCount:0},start:function(){var e=this,t=this.node.getChildByName("frog"),l=this.node.getChildByName("pauseBtn"),a=this.node.getComponent("ballMgr"),n=t.getComponent(cc.Animation);this.node.on(cc.Node.EventType.TOUCH_END,function(c){if(!(a.insertBlIndex>0)){var o=c.getLocation(),s=t.getBoundingBox(),r=l.getBoundingBox();if(s.contains(o))cc.log("current click is tower");else if(r.contains(o))cc.log("current click is pauseBtn");else{i.isSoundPlay&&cc.audioEngine.play(e.shoot,!1,1);var u=e.getAngle(o,t.getPosition());t.setRotation(u+90),n.play(),t.getComponent("frogMgr").sendBall(o)}}}),this.readJson(),this.setTimeLabel()},update:function(){this.schedule(this.setTimeBar,1)},playCollision:function(){cc.audioEngine.play(this.collision,!1,1)},setTimeBar:function(){this.maxSec--,this.timeBar.progress-=1/this.maxSec,this.setTimeLabel(),this.maxSec<=0&&this.showFaild()},showComplete:function(){var e=cc.view.getDesignResolutionSize(),t=cc.find("complete");t.getChildByName("score").getComponent(cc.Label).string=this.score;var l=cc.moveTo(1.5,cc.v2(e.width/2,e.height/2)),i=cc.callFunc(this.pauseGame,this),a=cc.sequence(l,i);t.runAction(a)},showFaild:function(){if(this.showFaildCount++,!(this.showFaildCount>1)){var e=cc.view.getDesignResolutionSize(),t=cc.find("failed"),l=cc.moveTo(1.5,cc.v2(e.width/2,e.height/2)),i=cc.callFunc(this.pauseGame,this),a=cc.sequence(l,i);t.runAction(a)}},pauseGame:function(){cc.director.pause()},setTimeLabel:function(){var e=parseInt(this.maxSec/60),t=parseInt(this.maxSec%60);t<10&&(this.timeLabel.string=" 0"+e+" : 0"+t),t>=10&&(this.timeLabel.string=" 0"+e+" : "+t)},setScoreLabel:function(e){this.score+=e;for(var t=this.scoreLabel.getComponent(cc.Label),l=0,i=this.score;0!=i;)l++,i=parseInt(i/10);switch(l){case 0:t.string="0000";break;case 1:t.string="000"+this.score;break;case 2:t.string="00"+this.score;break;case 3:t.string="0"+this.score;break;case 4:t.string=this.score}},getAngle:function(e,t){var l=t.y-e.y,i=t.x-e.x,a=Math.abs(l)/Math.abs(i),n=0;return l>0&&i<0?n=180*Math.atan(a)/Math.PI-90:l>0&&i>0?n=90-180*Math.atan(a)/Math.PI:l<0&&i<0?n=180*-Math.atan(a)/Math.PI-90:l<0&&i>0&&(n=180*Math.atan(a)/Math.PI+90),n},readJson:function(){var e=this;this.node.getChildByName("player");cc.loader.loadRes("data/lv"+i.curLevel,function(t,l){e.targetScore=l.target,cc.find("Canvas/LevelIndex").getComponent(cc.Label).string=i.curLevel})}}),cc._RF.pop()},{global:"global"}],global:[function(e,t,l){"use strict";cc._RF.push(t,"945b4v3jpdHybuRo2cOqGiX","global"),Object.defineProperty(l,"__esModule",{value:!0});l.curLevel=-1,l.bkMusicId=-1,l.isBkPlay=!0,l.isSoundPlay=!0;cc._RF.pop()},{}],logoMgr:[function(e,t,l){"use strict";cc._RF.push(t,"ff1715IqENOTb2GZfmUSdo2","logoMgr");var i=e("global");cc.Class({extends:cc.Component,properties:{backGround:{default:null,url:cc.AudioClip}},start:function(){cc.director.preloadScene("menuGame",function(e){e?cc.log(e):cc.log("load menuGame success")})},changeMenu:function(){i.bkMusicId=cc.audioEngine.play(this.backGround,!0,1),cc.director.loadScene("menuGame")}}),cc._RF.pop()},{global:"global"}],menuMgr:[function(e,t,l){"use strict";cc._RF.push(t,"c2119Z6eshKKb1IcplgK6W+","menuMgr");var i=e("global");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this.node.getChildByName("sound").getComponent(cc.Button),t=this.node.getChildByName("music").getComponent(cc.Button);cc.loader.loadRes("buttons",cc.SpriteAtlas,function(l,a){i.isSoundPlay?(e.normalSprite=a.getSpriteFrame("sound_btn"),e.hoverSprite=a.getSpriteFrame("sound_btn_h")):(e.normalSprite=a.getSpriteFrame("no_sound_btn"),e.hoverSprite=a.getSpriteFrame("no_sound_btn_h")),i.isBkPlay?(t.normalSprite=a.getSpriteFrame("music_btn"),t.hoverSprite=a.getSpriteFrame("music_btn_h")):(t.normalSprite=a.getSpriteFrame("no_music_btn"),t.hoverSprite=a.getSpriteFrame("no_music_btn_h"))})}}),cc._RF.pop()},{global:"global"}]},{},["animEventMgr","ball","ballMgr","btnMgr","effect","effectMgr","frogMgr","gameMgr","global","logoMgr","menuMgr"]);