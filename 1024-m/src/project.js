__require=function t(i,e,c){function o(s,r){if(!e[s]){if(!i[s]){var l=s.split("/");if(l=l[l.length-1],!i[l]){var a="function"==typeof __require&&__require;if(!r&&a)return a(l,!0);if(n)return n(l,!0);throw new Error("Cannot find module '"+s+"'")}}var u=e[s]={exports:{}};i[s][0].call(u.exports,function(t){return o(i[s][1][t]||t)},u,u.exports,t,i,e,c)}return e[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<c.length;s++)o(c[s]);return o}({back:[function(t,i,e){"use strict";cc._RF.push(i,"6182dsDiktAtLq80af00bF+","back"),cc.Class({extends:cc.Component,properties:{},start:function(){},back:function(){cc.director.loadScene("menu")}}),cc._RF.pop()},{}],block:[function(t,i,e){"use strict";cc._RF.push(i,"e7bde+olMpN+6GSpDUiA2HC","block"),cc.Class({extends:cc.Component,properties:{Type:2},start:function(){this.setTypeblock(this.Type)},getType:function(){return this.Type},clearSprite:function(){var t=this.node.getComponent(cc.Sprite);this.node.getChildByName("numLabel").getComponent(cc.Label).string="",t.spriteFrame=null},upnum:function(){if(this.Type*=2,2048==this.Type){var t=cc.find("losebg"),i=t.getComponent("losebg"),e=t.getChildByName("label").getComponent(cc.Label);i.setshow(),e.string="YOU WIN!"}this.setTypeblock(this.Type)},setTypeblock:function(t){var i=this.node.getChildByName("numLabel").getComponent(cc.Label),e=this.node.getComponent(cc.Sprite),c="numBg/numBg1";4==t?(c="numBg/numBg2",i.string="4"):8==t?(c="numBg/numBg3",i.string="8"):16==t?(c="numBg/numBg4",i.string="16"):32==t?(c="numBg/numBg2",i.string="32"):64==t&&(c="numBg/numBg2",i.string="64"),t>100&&(i.fontSize=50,128==t?(c="numBg/numBg2",i.string="128"):256==t?(c="numBg/numBg2",i.string="256"):512==t?(c="numBg/numBg2",i.string="512"):1024==t?(c="numBg/numBg2",i.string="1024"):2048==t&&(c="numBg/numBg2",this.node.color=[0,0,0,255],i.string="2048")),cc.loader.loadRes(c,cc.SpriteFrame,function(t,i){t?cc.error(t.message||t):e.spriteFrame=i})}}),cc._RF.pop()},{}],gamebg:[function(t,i,e){"use strict";cc._RF.push(i,"7ab13Tg8N5F0p8VkYv9+0K1","gamebg"),cc.Class({extends:cc.Component,properties:{blockbg:{default:null,type:cc.Prefab},block:{default:null,type:cc.Prefab},isClick:!1,blockbgList:[cc.Prefab],blockList:[cc.Prefab]},start:function(){this.initbg();for(var t=this,i=parseInt(4*Math.random()),e=parseInt(4*Math.random()),c=cc.view.getDesignResolutionSize(),o=0;o<4;o++){t.blockList[o]=[cc.Prefab];for(var n=0;n<4;n++)t.blockList[o][n]=null}t.blockList[i][e]=cc.instantiate(t.block);var s=128+138*e-c.width/2,r=128+138*i-300;t.blockList[i][e].setPosition(cc.v2(s,r)),t.node.addChild(t.blockList[i][e]);var l=cc.Vec2;t.node.on(cc.Node.EventType.TOUCH_START,function(i){t.isClick=!0,l=i.getLocation()}),t.node.on(cc.Node.EventType.TOUCH_MOVE,function(i){var e=i.getLocation();l.x-e.x>100&&1==t.isClick?(t.isClick=!1,t.direction=1,t.movemgr(),t.addblock()):e.x-l.x>100&&1==t.isClick?(t.isClick=!1,t.direction=2,t.movemgr(),t.addblock()):e.y-l.y>100&&1==t.isClick?(t.isClick=!1,t.direction=3,t.movemgr(),t.addblock()):l.y-e.y>100&&1==t.isClick&&(t.isClick=!1,t.direction=4,t.movemgr(),t.addblock())})},initbg:function(){for(var t=cc.view.getDesignResolutionSize(),i=0;i<4;i++){this.blockbgList[i]=[cc.Prefab];for(var e=0;e<4;e++){this.blockbgList[i][e]=cc.instantiate(this.blockbg);var c=128+138*e-t.width/2,o=128+138*i-300;this.blockbgList[i][e].setPosition(cc.v2(c,o)),this.node.addChild(this.blockbgList[i][e])}}},addblock:function(){var t=cc.view.getDesignResolutionSize(),i=parseInt(4*Math.random()),e=parseInt(4*Math.random());if(this.isvacancy())if(null==this.blockList[i][e]){this.blockList[i][e]=cc.instantiate(this.block);var c=128+138*e-t.width/2,o=128+138*i-300;this.blockList[i][e].setPosition(cc.v2(c,o)),this.node.addChild(this.blockList[i][e])}else this.addblock();else cc.find("losebg").getComponent("losebg").setshow()},movemgr:function(){if(1==this.direction||4==this.direction)for(var t=0;t<4;t++)for(var i=0;i<4;i++)null!=this.blockList[t][i]&&this.move(t,i);else if(2==this.direction||3==this.direction)for(t=3;t>-1;t--)for(i=3;i>-1;i--)null!=this.blockList[t][i]&&this.move(t,i)},move:function(t,i){var e=!1,c=-1,o=cc.Vec2,n=void 0,s=void 0,r=cc.view.getDesignResolutionSize();if(1==this.direction)for(var l=i-1;l>-2;l--){if(-1==l){c=l+1;break}if(null!=this.blockList[t][l]){if(s=this.blockList[t][i].getComponent("block"),(n=this.blockList[t][l].getComponent("block")).getType()==s.getType()){c=l,e=!0;break}c=l+1;break}}else if(2==this.direction)for(var a=i+1;a<5;a++){if(4==a){c=a-1;break}if(null!=this.blockList[t][a]){if(s=this.blockList[t][i].getComponent("block"),(n=this.blockList[t][a].getComponent("block")).getType()==s.getType()){c=a,e=!0;break}c=a-1;break}}else if(3==this.direction)for(var u=t+1;u<5;u++){if(4==u){c=u-1;break}if(null!=this.blockList[u][i]){if(s=this.blockList[t][i].getComponent("block"),(n=this.blockList[u][i].getComponent("block")).getType()==s.getType()){c=u,e=!0;break}c=u-1;break}}else if(4==this.direction)for(var b=t-1;b>-2;b--){if(-1==b){c=b+1;break}if(null!=this.blockList[b][i]){if(s=this.blockList[t][i].getComponent("block"),(n=this.blockList[b][i].getComponent("block")).getType()==s.getType()){c=b,e=!0;break}c=b+1;break}}if(1==this.direction||2==this.direction){o=cc.v2(128+138*c-r.width/2,this.blockList[t][i].y);var p=cc.moveTo(.1,o);-1!=c&&(this.blockList[t][i].runAction(p),e?(this.blockList[t][i]=null,s.clearSprite(),n.clearSprite(),n.upnum()):(this.blockList[t][c]=this.blockList[t][i],c!=i&&(this.blockList[t][i]=null)))}else if(3==this.direction||4==this.direction){o=cc.v2(this.blockList[t][i].x,128+138*c-300);var g=cc.moveTo(.1,o);-1!=c&&(e?(this.blockList[t][i].runAction(g),s.clearSprite(),n.clearSprite(),n.upnum(),this.blockList[t][i]=null):(this.blockList[t][i].runAction(g),this.blockList[c][i]=this.blockList[t][i],c!=t&&(this.blockList[t][i]=null)))}},clearblock:function(){for(var t=0;t<4;t++)for(var i=0;i<4;i++){if(null!=this.blockList[t][i])this.blockList[t][i].getComponent("block").clearSprite(),this.blockList[t][i]=null}this.addblock()},isvacancy:function(){for(var t=0;t<4;t++)for(var i=0;i<4;i++)if(null==this.blockList[t][i])return!0;return!1}}),cc._RF.pop()},{}],gameover:[function(t,i,e){"use strict";cc._RF.push(i,"8fa4cMP+ElDZJZJOkFgDnXb","gameover"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],losebg:[function(t,i,e){"use strict";cc._RF.push(i,"29a4828fApOk7K67WAyP/9C","losebg"),cc.Class({extends:cc.Component,properties:{},start:function(){this.node.active=!1},setshow:function(){this.node.active=!0}}),cc._RF.pop()},{}],replay1:[function(t,i,e){"use strict";cc._RF.push(i,"901caCm3zFIQqwPr8n/4Z9N","replay1"),cc.Class({extends:cc.Component,properties:{},start:function(){},startgame:function(){cc.find("gamebg").getComponent("gamebg").clearblock(),this.node.parent.active=!1}}),cc._RF.pop()},{}],replay:[function(t,i,e){"use strict";cc._RF.push(i,"8a851scwH1DOasmUa8sVuRA","replay"),cc.Class({extends:cc.Component,properties:{},startgame:function(){var t=cc.find("gamebg");null==t&&cc.log("1");var i=t.getComponent("gamebg");null==i&&cc.log("null"),i.clearblock()}}),cc._RF.pop()},{}],ui:[function(t,i,e){"use strict";cc._RF.push(i,"e3ad5ovlEpBeat6kVs+ZLqW","ui"),cc.Class({extends:cc.Component,properties:{},start:function(){},startgame:function(){cc.director.loadScene("game")}}),cc._RF.pop()},{}]},{},["back","block","gamebg","gameover","losebg","replay","replay1","ui"]);