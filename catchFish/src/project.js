__require=function t(e,i,o){function n(r,s){if(!i[r]){if(!e[r]){var a=r.split("/");if(a=a[a.length-1],!e[a]){var d="function"==typeof __require&&__require;if(!s&&d)return d(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+r+"'")}}var p=i[r]={exports:{}};e[r][0].call(p.exports,function(t){return n(e[r][1][t]||t)},p,p.exports,t,e,i,o)}return i[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<o.length;r++)n(o[r]);return n}({BatteryUp:[function(t,e,i){"use strict";cc._RF.push(e,"1d3f9Q+tlNK4b8GnAZQUmLx","BatteryUp");var o=t("gLabelScript");cc.Class({extends:cc.Component,properties:{},start:function(){o.batteryLv=3},addBtn:function(){o.batteryLv++,o.batteryLv>5&&(o.batteryLv=5),this.setBattery()},subBtn:function(){o.batteryLv--,o.batteryLv<3&&(o.batteryLv=3),this.setBattery()},setBattery:function(){var t=cc.find("battery");if(null!=t){var e=t.getComponent(cc.Sprite),i="Battery/gun_"+o.batteryLv;cc.loader.loadRes(i,cc.SpriteFrame,function(t,i){t?cc.error(err.message||err):e.spriteFrame=i});var n=cc.find("batterybg/batteryGold").getComponent(cc.RichText),c=100*o.batteryLv-100;n.string="<color>"+c+"</color>"}else cc.log("battery null!!")}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}],Battery:[function(t,e,i){"use strict";cc._RF.push(e,"c9e6bkT1fdGl7r6EBuQANJ8","Battery");var o=t("gLabelScript");cc.Class({extends:cc.Component,properties:{battery:{default:null,type:cc.Sprite}},start:function(){var t=this;t.bulletCount=0,o.gold=2e4,o.isSetBullet=!0,t.node.on(cc.Node.EventType.TOUCH_END,function(e){cc.view.getDesignResolutionSize();var i=e.getLocation(),n=cc.find("battery"),c=t.getAngle(i,n.getPosition());o.isSetBullet?o.gold<50*o.batteryLv?(t.setForbidden(i),n.setRotation(c)):(n.setRotation(c),t.sendBullet(n.getPosition(),e.getLocation(),c),o.gold-=50*o.batteryLv,t.setLable()):(t.setForbidden(i),n.setRotation(c))})},getAngle:function(t,e){var i=e.y-t.y,o=e.x-t.x,n=Math.abs(i)/Math.abs(o),c=0;return i>0&&o<0?c=180*Math.atan(n)/Math.PI-90:i>0&&o>0?c=90-180*Math.atan(n)/Math.PI:i<0&&o<0?c=180*-Math.atan(n)/Math.PI-90:i<0&&o>0&&(c=180*Math.atan(n)/Math.PI+90),c},sendBullet:function(t,e,i){var o=cc.find("BulletMgr");null!=o?o.getComponent("BulletMgr").addBullet(t.x,t.y,e,i):cc.log("BulletMgr null!!")},setForbidden:function(t){var e=cc.find("forbiddenMgr");null!=e?e.getComponent("forbiddenMgr").addForbidden(t.x,t.y,t):cc.log("forbiddenMgr null!!")},setLable:function(){cc.find("goldLabel").getComponent(cc.RichText).string="<color=#fff000>\u91d1\u5e01:</c><color=#fff000>"+o.gold+"</color>"}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}],BulletMgr:[function(t,e,i){"use strict";cc._RF.push(e,"14927LWYrdNgLgqHOxHlNUA","BulletMgr"),cc.Class({extends:cc.Component,properties:{bulletPre:{default:null,type:cc.Prefab},bulletList:[cc.Prefab]},start:function(){},addBullet:function(t,e,i,o){var n=cc.instantiate(this.bulletPre);n.setPosition(cc.v2(t,e));var c=n.getComponent("Bullet");c.setPos(i.x,i.y,o),c.setSprite(),this.node.addChild(n),this.bulletList.push(n)},update:function(t){var e=this,i=0;e.bulletList.forEach(function(t){var o=t.getComponent(cc.Sprite);if(0==cc.isValid(o)||0==o.node.active)return e.node.removeChild(t),void e.bulletList.splice(i,1);i++})}}),cc._RF.pop()},{}],Bullet:[function(t,e,i){"use strict";cc._RF.push(e,"237faEX2RNPyLNI1TfPdR8O","Bullet");var o=t("gLabelScript");cc.Class({extends:cc.Component,properties:{posX:0,posY:0,isDelete:!1},start:function(){this.bulletMove()},setPos:function(t,e,i){this.posX=t,this.posY=e,this.node.setRotation(i)},removeSprite:function(){var t=this.getComponent(cc.Sprite);cc.isValid(t)&&(t.node.active=!1)},setSprite:function(){var t=this,e=t.getComponent(cc.Sprite),i="Bullet/bullet"+o.batteryLv;cc.loader.loadRes(i,cc.SpriteFrame,function(i,o){i?cc.error(err.message||err):e.spriteFrame?e.spriteFrame=o:t.removeSprite()})},update:function(t){var e=cc.view.getDesignResolutionSize();(this.node.y>e.height+200||this.node.y<-60||this.node.x>e.width+200||this.node.x<-60)&&this.removeSprite()},bulletMove:function(){var t=100*(this.posX-this.node.x),e=100*(this.posY-this.node.y),i=Math.sqrt(t*t+e*e),o=cc.moveTo(i/500,cc.v2(t,e));this.node.runAction(o)},onCollisionEnter:function(t,e){0==t.tag&&this.removeSprite()},onCollisionStay:function(t,e){},onCollisionExit:function(t,e){}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}],GameLogo:[function(t,e,i){"use strict";cc._RF.push(e,"ea7a2osReZCfoy8p3TZNCgQ","GameLogo"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.director.preloadScene("GameMenu"),this.scheduleOnce(this.loadMenu,1.5)},loadMenu:function(){cc.director.loadScene("GameMenu")}}),cc._RF.pop()},{}],GameMap:[function(t,e,i){"use strict";cc._RF.push(e,"2f836X83x9JSKui0i3Bjq2/","GameMap");var o=t("gLabelScript");cc.Class({extends:cc.Component,properties:{},start:function(){cc.director.getCollisionManager().enabled=!0,this.loadMap(),o.fishTideCount=0,o.fishTideTotal=50,o.isFishReward=!1},loadMap:function(){var t=this.getComponent(cc.Sprite),e="Game/GameMap"+o.map;cc.loader.loadRes(e,cc.SpriteFrame,function(e,i){e?cc.error(err.message||err):t.spriteFrame=i})},backBtn:function(){cc.director.preloadScene("SelectMap"),cc.director.loadScene("SelectMap")}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}],GameToSel:[function(t,e,i){"use strict";cc._RF.push(e,"9b9d2FbSVxFWJHM1q/E/Pig","GameToSel"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.director.preloadScene("SelectMap")},selectMap:function(){cc.director.loadScene("SelectMap")},exitGame:function(){cc.director.end()},gameMenu:function(){cc.director.loadScene("GameMenu")}}),cc._RF.pop()},{}],GoldMgr:[function(t,e,i){"use strict";cc._RF.push(e,"b185dmoLVVGZ54Md8LKBu2Z","GoldMgr"),cc.Class({extends:cc.Component,properties:{goldPre:{default:null,type:cc.Prefab},goldList:[cc.Prefab]},start:function(){},addGold:function(t,e){var i=cc.instantiate(this.goldPre);i.x=t,i.y=e,this.node.addChild(i),this.goldList.push(i)},update:function(t){var e=this,i=0;e.goldList.forEach(function(t){var o=t.getComponent(cc.Sprite);if(0==cc.isValid(o))return e.node.removeChild(t),void e.goldList.splice(i,1);i++})}}),cc._RF.pop()},{}],Gold:[function(t,e,i){"use strict";cc._RF.push(e,"0c7c8rrzc9AUYB12X7zcjrZ","Gold"),cc.Class({extends:cc.Component,properties:{},start:function(){this.getComponent(cc.Animation).play("goldAni"),this.moveLabel(),this.scheduleOnce(this.removeGold,.5)},removeGold:function(){this.getComponent(cc.Sprite).destroy()},moveLabel:function(){var t=cc.find("goldLabel"),e=this.node.x-t.x,i=this.node.y-t.y,o=(Math.sqrt(e*e+i*i),cc.moveTo(.3,cc.v2(t.x,t.y)));this.node.runAction(o)}}),cc._RF.pop()},{}],Pro:[function(t,e,i){"use strict";cc._RF.push(e,"194cbId3OBD9YvPpxf4+rtm","Pro"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],SelectMap:[function(t,e,i){"use strict";cc._RF.push(e,"ec85feRL4ZI66TNJ9+MSly2","SelectMap");var o=t("gLabelScript");cc.Class({extends:cc.Component,properties:{},start:function(){cc.director.preloadScene("Game"),o.map=1},setMap1:function(){o.map=1,cc.director.loadScene("Game"),cc.log("map:"+o.map)},setMap2:function(){o.map=2,cc.director.loadScene("Game"),cc.log("map:"+o.map)},setMap3:function(){o.map=3,cc.director.loadScene("Game"),cc.log("map:"+o.map)},backBtn:function(){cc.director.preloadScene("GameMenu"),cc.director.loadScene("GameMenu")}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}],SetAni:[function(t,e,i){"use strict";cc._RF.push(e,"7f1c6ob2l5NFYNn5OgQbREY","SetAni"),cc.Class({extends:cc.Component,properties:{},start:function(){this.setAni()},setAni:function(){var t=this.addComponent(cc.Animation);cc.loader.loadRes("Fish/fishItem",cc.SpriteAtlas,function(e,i){if(e)cc.error(e.message||e);else{var o=i.getSpriteFrames();o.length=0;for(var n=1;n<11;n++){var c="fish010_0"+n,r=i.getSpriteFrame(c);o.push(r)}var s=cc.AnimationClip.createWithSpriteFrames(o,10);s.name="run",s.wrapMode=cc.WrapMode.Loop,t.addClip(s),t.play("run")}})}}),cc._RF.pop()},{}],fishingNetMgr:[function(t,e,i){"use strict";cc._RF.push(e,"bb5bfDf7MdOt5+r91e51hO6","fishingNetMgr"),cc.Class({extends:cc.Component,properties:{fishNetPre:{default:null,type:cc.Prefab},fishNetList:[cc.Prefab]},start:function(){},addFishNet:function(t,e){var i=cc.instantiate(this.fishNetPre);i.x=t,i.y=e,i.getComponent("fishingNet").setSprite(),this.node.addChild(i),this.fishNetList.push(i)},update:function(t){var e=this,i=0;e.fishNetList.forEach(function(t){var o=t.getComponent(cc.Sprite);if(0==cc.isValid(o))return e.node.removeChild(t),void e.fishNetList.splice(i,1);i++})}}),cc._RF.pop()},{}],fishingNet:[function(t,e,i){"use strict";cc._RF.push(e,"85228p+rihNW4Q7iX+l2bMm","fishingNet");var o=t("gLabelScript");cc.Class({extends:cc.Component,properties:{},start:function(){this.getComponent(cc.Animation).play("fishingNetAni"),this.scheduleOnce(this.removeForb,.08)},removeForb:function(){this.getComponent(cc.Sprite).destroy()},setSprite:function(){var t=this.getComponent(cc.Sprite),e="Bullet/fishnet"+o.batteryLv;cc.loader.loadRes(e,cc.SpriteFrame,function(e,i){e?cc.error(err.message||err):t.spriteFrame=i})}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}],forbiddenMgr:[function(t,e,i){"use strict";cc._RF.push(e,"7bc51Ox51FNYrjRimhOONAd","forbiddenMgr"),cc.Class({extends:cc.Component,properties:{forbiddenPre:{default:null,type:cc.Prefab},forbiddenList:[cc.Prefab]},start:function(){},addForbidden:function(t,e){var i=cc.instantiate(this.forbiddenPre);i.x=t,i.y=e,this.node.addChild(i),this.forbiddenList.push(i)},update:function(t){var e=this,i=0;e.forbiddenList.forEach(function(t){var o=t.getComponent(cc.Sprite);if(0==cc.isValid(o))return e.node.removeChild(t),void e.forbiddenList.splice(i,1);i++})}}),cc._RF.pop()},{}],forbidden:[function(t,e,i){"use strict";cc._RF.push(e,"04468vpOUNOPbfVlnODYNBW","forbidden"),cc.Class({extends:cc.Component,properties:{},start:function(){this.getComponent(cc.Animation).play("forbidden"),this.scheduleOnce(this.removeForb,.08)},removeForb:function(){this.getComponent(cc.Sprite).destroy()}}),cc._RF.pop()},{}],gLabelScript:[function(t,e,i){"use strict";cc._RF.push(e,"35db3C+3TRNIr8YfOVZO/Y3","gLabelScript"),cc.Class({extends:cc.Component,properties:{map:0,monsterType:0,monsterBirth:0,batteryLv:3,fishIsDeath:!1,gold:5e3,isFishtide:!1,isSetBullet:!1,fishTideCount:0,fishTideTotal:50,isFishReward:!1},start:function(){}}),cc._RF.pop()},{}],logo:[function(t,e,i){"use strict";cc._RF.push(e,"40f4apl0LhOa72ccDSwdp77","logo"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.director.preloadScene("GameLogo"),this.scheduleOnce(this.loadLogo,1.5)},loadLogo:function(){cc.director.loadScene("GameLogo")}}),cc._RF.pop()},{}],monsterMgr:[function(t,e,i){"use strict";cc._RF.push(e,"f6fb7lMXYpJ5aW5WZF9DjcI","monsterMgr");var o=t("gLabelScript");cc.Class({extends:cc.Component,properties:{flyPrefab:{default:null,type:cc.Prefab},monsterList:[cc.Prefab],monsterType:1},start:function(){this.schedule(this.addMon,.5),o.isFishtide=!1},addMon:function(){o.monsterType=parseInt(11*Math.random()+1),this.addMonster()},addMonster:function(){var t=cc.instantiate(this.flyPrefab);this.node.addChild(t),this.monsterList.push(t),o.monsterBirth=parseInt(3*Math.random());var e=cc.view.getDesignResolutionSize();0==o.monsterBirth?(t.x=parseInt(Math.random()*e.width),t.y=-100):1==o.monsterBirth?(t.x=parseInt(Math.random()*e.width),t.y=940):2==o.monsterBirth?(t.x=-100,t.y=parseInt(Math.random()*e.height)):3==o.monsterBirth&&(t.x=1060,t.y=parseInt(Math.random()*e.height));var i=t.getComponent(cc.Animation),n="fish0"+o.monsterType+"Ani";i.play(n),t.addComponent("monster").setMonsterType(o.monsterType,o.monsterBirth)},stopMonster:function(){this.unschedule(this.addMon),this.monsterType=0,cc.director.getScheduler().setTimeScale(10),o.isSetBullet=!1,this.schedule(this.setFishtide,.85,cc.macro.REPEAT_FOREVER,10)},staMonster:function(){this.schedule(this.addMon,.5)},setFishtide:function(){if(o.isFishtide=!0,o.isSetBullet=!0,cc.director.getScheduler().setTimeScale(1),this.monsterType++,this.monsterType>10)return this.unschedule(this.setFishtide),o.isFishtide=!1,this.schedule(this.addMon,.5,cc.macro.REPEAT_FOREVER,5),o.isFishReward=!1,void this.setPro();cc.view.getDesignResolutionSize();for(var t=1;t<5;t++){var e=cc.instantiate(this.flyPrefab);this.node.addChild(e),this.monsterList.push(e),e.x=-300,e.y=120*t+40;var i=e.getComponent(cc.Animation),n="fish0"+this.monsterType+"Ani";i.play(n);var c=e.addComponent("monster");c.setFishtidePos(e.x,e.y),c.FishtideGoldHp(this.monsterType)}},setLable:function(){cc.find("goldLabel").getComponent(cc.RichText).string="<color=#fff000>\u91d1\u5e01:</c><color=#fff000>"+o.gold+"</color>"},setPro:function(){var t=cc.find("fishTideBar").getComponent(cc.ProgressBar);cc.log(0),t.progress=0},update:function(t){var e=this,i=0;e.monsterList.forEach(function(t){var o=t.getComponent(cc.Sprite);if(0==cc.isValid(o)||0==o.node.active)return cc.log("remove"),e.node.removeChild(t),void e.monsterList.splice(i,1);i++})},addMonsterTow:function(){var t=new cc.Node;this.node.addChild(t);var e=t.addComponent(cc.Sprite);e.spriteFrame=new cc.SpriteFrame;cc.loader.loadRes("Fish/fish010_01",cc.SpriteFrame,function(t,i){t?cc.error(t.message||t):e.spriteFrame=i});var i=cc.view.getDesignResolutionSize();t.x=i.width/4,t.y=i.height/4;var o=t.addComponent(cc.Animation);cc.loader.loadRes("Fish/fishItem",cc.SpriteAtlas,function(t,e){var i=e.getSpriteFrames();i.length=0;for(var n=1;n<=10;n++){var c="fish010_0"+n,r=e.getSpriteFrame(c);i.push(r)}c="fish010_01",r=e.getSpriteFrame(c);i.push(r);var s=cc.AnimationClip.createWithSpriteFrames(i,10);s.name="run",s.wrapMode=cc.WrapMode.Loop,o.addClip(s),o.play("run")})}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}],monster:[function(t,e,i){"use strict";cc._RF.push(e,"d6914yUJHRF5IusRq7vpD2G","monster");var o=t("gLabelScript");cc.Class({extends:cc.Component,properties:{birthDir:0,monsterType:0,isDelete:!1,monsterHp:1,monsterGold:150,fishTidePosX:0,fishTidePosY:0},start:function(){this.move()},setMonsterType:function(t,e){this.monsterType=t,this.birthDir=e,this.monsterHp=4*t,this.monsterGold=150*t+50},FishtideGoldHp:function(t){this.monsterType=t,this.monsterHp=1,this.monsterGold=150*t+100},setFishtidePos:function(t,e){this.fishTidePosX=t,this.fishTidePosY=e},move:function(){var t=cc.view.getDesignResolutionSize(),e=void 0,i=void 0;if(o.isFishtide){e=1440,i=this.fishTidePosY,this.node.setRotation(90);var n=cc.moveTo(10,cc.v2(e,i));this.node.runAction(n)}else{0==o.monsterBirth?(e=parseInt(Math.random()*t.width),i=960):1==o.monsterBirth?(e=parseInt(Math.random()*t.width),i=-300):2==o.monsterBirth?(e=1440,i=parseInt(Math.random()*t.height)):3==o.monsterBirth&&(e=-300,i=parseInt(Math.random()*t.height));var c=this.getAngle(cc.v2(e,i),this.node.getPosition());this.node.setRotation(c);var r=this.node.x-e,s=this.node.y-i,a=cc.flipY(!0);this.node.runAction(a);var d=Math.sqrt(r*r+s*s),p=cc.moveTo(d/100,cc.v2(e,i));this.node.runAction(p)}},getAngle:function(t,e){var i=e.y-t.y,o=e.x-t.x,n=Math.abs(i)/Math.abs(o),c=0;return i>0&&o<0?c=180*Math.atan(n)/Math.PI-90:i>0&&o>0?c=90-180*Math.atan(n)/Math.PI:i<0&&o<0?c=180*-Math.atan(n)/Math.PI-90:i<0&&o>0&&(c=180*Math.atan(n)/Math.PI+90),c},removeSprite:function(){var t=this.getComponent(cc.Sprite);cc.isValid(t)&&(t.node.active=!1,this.isDelete=!0)},update:function(t){this.isDelete||960!=this.node.y&&-300!=this.node.y&&1440!=this.node.x&&300!=this.node.x||(this.removeSprite(),this.isDelete=!0)},onCollisionEnter:function(t,e){if(1==t.tag&&(0==this.isDelete&&(cc.find("fishingNetMgr").getComponent("fishingNetMgr").addFishNet(this.node.x,this.node.y),this.monsterHp-=o.batteryLv,this.monsterHp<=0))){this.isDelete=!0;var i=this.node.getComponent(cc.Animation),n="fish0"+this.monsterType+"Ani",c="fish0"+this.monsterType+"Catch";i.stop(n),i.play(c),this.scheduleOnce(this.removeSprite,.3),cc.find("goldMgr").getComponent("GoldMgr").addGold(this.node.x,this.node.y),o.gold+=this.monsterGold,this.setLable(),0==o.isFishReward&&(o.fishTideCount++,this.setPro())}},setLable:function(){cc.find("goldLabel").getComponent(cc.RichText).string="<color=#fff000>\u91d1\u5e01:</c><color=#fff000>"+o.gold+"</color>"},setPro:function(){var t=cc.find("fishTideBar").getComponent(cc.ProgressBar),e=o.fishTideCount/o.fishTideTotal;(cc.log(e),t.progress=e,1==e)&&(o.isFishReward=!0,o.fishTideCount=0,cc.find("monsterMgr").getComponent("monsterMgr").stopMonster())}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}]},{},["Battery","BatteryUp","Bullet","BulletMgr","GameLogo","GameMap","GameToSel","Gold","GoldMgr","Pro","SelectMap","SetAni","fishingNet","fishingNetMgr","forbidden","forbiddenMgr","gLabelScript","logo","monster","monsterMgr"]);