require=function e(t,i,o){function n(r,s){if(!i[r]){if(!t[r]){var a="function"==typeof require&&require;if(!s&&a)return a(r,!0);if(c)return c(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var p=i[r]={exports:{}};t[r][0].call(p.exports,function(e){var i=t[r][1][e];return n(i||e)},p,p.exports,e,t,i,o)}return i[r].exports}for(var c="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({BatteryUp:[function(e,t,i){"use strict";cc._RF.push(t,"1d3f9Q+tlNK4b8GnAZQUmLx","BatteryUp");var o=e("gLabelScript");cc.Class({extends:cc.Component,properties:{},start:function(){o.batteryLv=3},addBtn:function(){o.batteryLv++,o.batteryLv>5&&(o.batteryLv=5),this.setBattery()},subBtn:function(){o.batteryLv--,o.batteryLv<3&&(o.batteryLv=3),this.setBattery()},setBattery:function(){var e=cc.find("battery");if(null!=e){var t=e.getComponent(cc.Sprite),i="Battery/gun_"+o.batteryLv;cc.loader.loadRes(i,cc.SpriteFrame,function(e,i){e?cc.error(err.message||err):t.spriteFrame=i});var n=cc.find("batterybg/batteryGold").getComponent(cc.RichText),c=100*o.batteryLv-100;n.string="<color>"+c+"</color>"}else cc.log("battery null!!")}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}],Battery:[function(e,t,i){"use strict";cc._RF.push(t,"c9e6bkT1fdGl7r6EBuQANJ8","Battery");var o=e("gLabelScript");cc.Class({extends:cc.Component,properties:{battery:{default:null,type:cc.Sprite}},start:function(){var e=this;e.bulletCount=0,o.gold=2e4,o.isSetBullet=!0,e.node.on(cc.Node.EventType.TOUCH_END,function(t){cc.view.getDesignResolutionSize();var i=t.getLocation(),n=cc.find("battery"),c=e.getAngle(i,n.getPosition());o.isSetBullet?o.gold<50*o.batteryLv?(e.setForbidden(i),n.setRotation(c)):(n.setRotation(c),e.sendBullet(n.getPosition(),t.getLocation(),c),o.gold-=50*o.batteryLv,e.setLable()):(e.setForbidden(i),n.setRotation(c))})},getAngle:function(e,t){var i=t.y-e.y,o=t.x-e.x,n=Math.abs(i)/Math.abs(o),c=0;return i>0&&o<0?c=180*Math.atan(n)/Math.PI-90:i>0&&o>0?c=90-180*Math.atan(n)/Math.PI:i<0&&o<0?c=180*-Math.atan(n)/Math.PI-90:i<0&&o>0&&(c=180*Math.atan(n)/Math.PI+90),c},sendBullet:function(e,t,i){var o=cc.find("BulletMgr");null!=o?o.getComponent("BulletMgr").addBullet(e.x,e.y,t,i):cc.log("BulletMgr null!!")},setForbidden:function(e){var t=cc.find("forbiddenMgr");null!=t?t.getComponent("forbiddenMgr").addForbidden(e.x,e.y,e):cc.log("forbiddenMgr null!!")},setLable:function(){cc.find("goldLabel").getComponent(cc.RichText).string="<color=#fff000>金币:</c><color=#fff000>"+o.gold+"</color>"}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}],BulletMgr:[function(e,t,i){"use strict";cc._RF.push(t,"14927LWYrdNgLgqHOxHlNUA","BulletMgr"),cc.Class({extends:cc.Component,properties:{bulletPre:{default:null,type:cc.Prefab},bulletList:[cc.Prefab]},start:function(){},addBullet:function(e,t,i,o){var n=cc.instantiate(this.bulletPre);n.setPosition(cc.v2(e,t));var c=n.getComponent("Bullet");c.setPos(i.x,i.y,o),c.setSprite(),this.node.addChild(n),this.bulletList.push(n)},update:function(e){var t=this,i=0;t.bulletList.forEach(function(e){var o=e.getComponent(cc.Sprite);if(0==cc.isValid(o)||0==o.node.active)return t.node.removeChild(e),void t.bulletList.splice(i,1);i++})}}),cc._RF.pop()},{}],Bullet:[function(e,t,i){"use strict";cc._RF.push(t,"237faEX2RNPyLNI1TfPdR8O","Bullet");var o=e("gLabelScript");cc.Class({extends:cc.Component,properties:{posX:0,posY:0,isDelete:!1},start:function(){this.bulletMove()},setPos:function(e,t,i){this.posX=e,this.posY=t,this.node.setRotation(i)},removeSprite:function(){var e=this.getComponent(cc.Sprite);cc.isValid(e)&&(e.node.active=!1)},setSprite:function(){var e=this,t=e.getComponent(cc.Sprite),i="Bullet/bullet"+o.batteryLv;cc.loader.loadRes(i,cc.SpriteFrame,function(i,o){i?cc.error(err.message||err):t.spriteFrame?t.spriteFrame=o:e.removeSprite()})},update:function(e){var t=cc.view.getDesignResolutionSize();(this.node.y>t.height+200||this.node.y<-60||this.node.x>t.width+200||this.node.x<-60)&&this.removeSprite()},bulletMove:function(){var e=this,t=100*(e.posX-e.node.x),i=100*(e.posY-e.node.y),o=Math.sqrt(t*t+i*i),n=cc.moveTo(o/500,cc.v2(t,i));e.node.runAction(n)},onCollisionEnter:function(e,t){0==e.tag&&this.removeSprite()},onCollisionStay:function(e,t){},onCollisionExit:function(e,t){}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}],GameLogo:[function(e,t,i){"use strict";cc._RF.push(t,"ea7a2osReZCfoy8p3TZNCgQ","GameLogo"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.director.preloadScene("GameMenu"),this.scheduleOnce(this.loadMenu,1.5)},loadMenu:function(){cc.director.loadScene("GameMenu")}}),cc._RF.pop()},{}],GameMap:[function(e,t,i){"use strict";cc._RF.push(t,"2f836X83x9JSKui0i3Bjq2/","GameMap");var o=e("gLabelScript");cc.Class({extends:cc.Component,properties:{},start:function(){cc.director.getCollisionManager().enabled=!0,this.loadMap(),o.fishTideCount=0,o.fishTideTotal=50,o.isFishReward=!1},loadMap:function(){var e=this.getComponent(cc.Sprite),t="Game/GameMap"+o.map;cc.loader.loadRes(t,cc.SpriteFrame,function(t,i){t?cc.error(err.message||err):e.spriteFrame=i})},backBtn:function(){cc.director.preloadScene("SelectMap"),cc.director.loadScene("SelectMap")}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}],GameToSel:[function(e,t,i){"use strict";cc._RF.push(t,"9b9d2FbSVxFWJHM1q/E/Pig","GameToSel"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.director.preloadScene("SelectMap")},selectMap:function(){cc.director.loadScene("SelectMap")},exitGame:function(){cc.director.end()},gameMenu:function(){cc.director.loadScene("GameMenu")}}),cc._RF.pop()},{}],GoldMgr:[function(e,t,i){"use strict";cc._RF.push(t,"b185dmoLVVGZ54Md8LKBu2Z","GoldMgr"),cc.Class({extends:cc.Component,properties:{goldPre:{default:null,type:cc.Prefab},goldList:[cc.Prefab]},start:function(){},addGold:function(e,t){var i=cc.instantiate(this.goldPre);i.x=e,i.y=t,this.node.addChild(i),this.goldList.push(i)},update:function(e){var t=this,i=0;t.goldList.forEach(function(e){var o=e.getComponent(cc.Sprite);if(0==cc.isValid(o))return t.node.removeChild(e),void t.goldList.splice(i,1);i++})}}),cc._RF.pop()},{}],Gold:[function(e,t,i){"use strict";cc._RF.push(t,"0c7c8rrzc9AUYB12X7zcjrZ","Gold"),cc.Class({extends:cc.Component,properties:{},start:function(){this.getComponent(cc.Animation).play("goldAni"),this.moveLabel(),this.scheduleOnce(this.removeGold,.5)},removeGold:function(){this.getComponent(cc.Sprite).destroy()},moveLabel:function(){var e=cc.find("goldLabel"),t=this.node.x-e.x,i=this.node.y-e.y,o=(Math.sqrt(t*t+i*i),cc.moveTo(.3,cc.v2(e.x,e.y)));this.node.runAction(o)}}),cc._RF.pop()},{}],Pro:[function(e,t,i){"use strict";cc._RF.push(t,"194cbId3OBD9YvPpxf4+rtm","Pro"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],SelectMap:[function(e,t,i){"use strict";cc._RF.push(t,"ec85feRL4ZI66TNJ9+MSly2","SelectMap");var o=e("gLabelScript");cc.Class({extends:cc.Component,properties:{},start:function(){cc.director.preloadScene("Game"),o.map=1},setMap1:function(){o.map=1,cc.director.loadScene("Game"),cc.log("map:"+o.map)},setMap2:function(){o.map=2,cc.director.loadScene("Game"),cc.log("map:"+o.map)},setMap3:function(){o.map=3,cc.director.loadScene("Game"),cc.log("map:"+o.map)},backBtn:function(){cc.director.preloadScene("GameMenu"),cc.director.loadScene("GameMenu")}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}],SetAni:[function(e,t,i){"use strict";cc._RF.push(t,"7f1c6ob2l5NFYNn5OgQbREY","SetAni"),cc.Class({extends:cc.Component,properties:{},start:function(){this.setAni()},setAni:function(){var e=this.addComponent(cc.Animation);cc.loader.loadRes("Fish/fishItem",cc.SpriteAtlas,function(t,i){if(t)cc.error(t.message||t);else{var o=i.getSpriteFrames();o.length=0;for(var n=1;n<11;n++){var c="fish010_0"+n,r=i.getSpriteFrame(c);o.push(r)}var s=cc.AnimationClip.createWithSpriteFrames(o,10);s.name="run",s.wrapMode=cc.WrapMode.Loop,e.addClip(s),e.play("run")}})}}),cc._RF.pop()},{}],fishingNetMgr:[function(e,t,i){"use strict";cc._RF.push(t,"bb5bfDf7MdOt5+r91e51hO6","fishingNetMgr"),cc.Class({extends:cc.Component,properties:{fishNetPre:{default:null,type:cc.Prefab},fishNetList:[cc.Prefab]},start:function(){},addFishNet:function(e,t){var i=cc.instantiate(this.fishNetPre);i.x=e,i.y=t,i.getComponent("fishingNet").setSprite(),this.node.addChild(i),this.fishNetList.push(i)},update:function(e){var t=this,i=0;t.fishNetList.forEach(function(e){var o=e.getComponent(cc.Sprite);if(0==cc.isValid(o))return t.node.removeChild(e),void t.fishNetList.splice(i,1);i++})}}),cc._RF.pop()},{}],fishingNet:[function(e,t,i){"use strict";cc._RF.push(t,"85228p+rihNW4Q7iX+l2bMm","fishingNet");var o=e("gLabelScript");cc.Class({extends:cc.Component,properties:{},start:function(){this.getComponent(cc.Animation).play("fishingNetAni"),this.scheduleOnce(this.removeForb,.08)},removeForb:function(){this.getComponent(cc.Sprite).destroy()},setSprite:function(){var e=this.getComponent(cc.Sprite),t="Bullet/fishnet"+o.batteryLv;cc.loader.loadRes(t,cc.SpriteFrame,function(t,i){t?cc.error(err.message||err):e.spriteFrame=i})}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}],forbiddenMgr:[function(e,t,i){"use strict";cc._RF.push(t,"7bc51Ox51FNYrjRimhOONAd","forbiddenMgr"),cc.Class({extends:cc.Component,properties:{forbiddenPre:{default:null,type:cc.Prefab},forbiddenList:[cc.Prefab]},start:function(){},addForbidden:function(e,t){var i=cc.instantiate(this.forbiddenPre);i.x=e,i.y=t,this.node.addChild(i),this.forbiddenList.push(i)},update:function(e){var t=this,i=0;t.forbiddenList.forEach(function(e){var o=e.getComponent(cc.Sprite);if(0==cc.isValid(o))return t.node.removeChild(e),void t.forbiddenList.splice(i,1);i++})}}),cc._RF.pop()},{}],forbidden:[function(e,t,i){"use strict";cc._RF.push(t,"04468vpOUNOPbfVlnODYNBW","forbidden"),cc.Class({extends:cc.Component,properties:{},start:function(){this.getComponent(cc.Animation).play("forbidden"),this.scheduleOnce(this.removeForb,.08)},removeForb:function(){this.getComponent(cc.Sprite).destroy()}}),cc._RF.pop()},{}],gLabelScript:[function(e,t,i){"use strict";cc._RF.push(t,"35db3C+3TRNIr8YfOVZO/Y3","gLabelScript"),cc.Class({extends:cc.Component,properties:{map:0,monsterType:0,monsterBirth:0,batteryLv:3,fishIsDeath:!1,gold:5e3,isFishtide:!1,isSetBullet:!1,fishTideCount:0,fishTideTotal:50,isFishReward:!1},start:function(){}}),cc._RF.pop()},{}],logo:[function(e,t,i){"use strict";cc._RF.push(t,"40f4apl0LhOa72ccDSwdp77","logo"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.director.preloadScene("GameLogo"),this.scheduleOnce(this.loadLogo,1.5)},loadLogo:function(){cc.director.loadScene("GameLogo")}}),cc._RF.pop()},{}],monsterMgr:[function(e,t,i){"use strict";cc._RF.push(t,"f6fb7lMXYpJ5aW5WZF9DjcI","monsterMgr");var o=e("gLabelScript");cc.Class({extends:cc.Component,properties:{flyPrefab:{default:null,type:cc.Prefab},monsterList:[cc.Prefab],monsterType:1},start:function(){this.schedule(this.addMon,.5),o.isFishtide=!1},addMon:function(){o.monsterType=parseInt(11*Math.random()+1),this.addMonster()},addMonster:function(){var e=cc.instantiate(this.flyPrefab);this.node.addChild(e),this.monsterList.push(e),o.monsterBirth=parseInt(3*Math.random());var t=cc.view.getDesignResolutionSize();0==o.monsterBirth?(e.x=parseInt(Math.random()*t.width),e.y=-100):1==o.monsterBirth?(e.x=parseInt(Math.random()*t.width),e.y=940):2==o.monsterBirth?(e.x=-100,e.y=parseInt(Math.random()*t.height)):3==o.monsterBirth&&(e.x=1060,e.y=parseInt(Math.random()*t.height));var i=e.getComponent(cc.Animation),n="fish0"+o.monsterType+"Ani";i.play(n),e.addComponent("monster").setMonsterType(o.monsterType,o.monsterBirth)},stopMonster:function(){this.unschedule(this.addMon),this.monsterType=0,cc.director.getScheduler().setTimeScale(10),o.isSetBullet=!1,this.schedule(this.setFishtide,.85,cc.macro.REPEAT_FOREVER,10)},staMonster:function(){this.schedule(this.addMon,.5)},setFishtide:function(){if(o.isFishtide=!0,o.isSetBullet=!0,cc.director.getScheduler().setTimeScale(1),this.monsterType++,this.monsterType>10)return this.unschedule(this.setFishtide),o.isFishtide=!1,this.schedule(this.addMon,.5,cc.macro.REPEAT_FOREVER,5),o.isFishReward=!1,void this.setPro();cc.view.getDesignResolutionSize();for(var e=1;e<5;e++){var t=cc.instantiate(this.flyPrefab);this.node.addChild(t),this.monsterList.push(t),t.x=-300,t.y=120*e+40;var i=t.getComponent(cc.Animation),n="fish0"+this.monsterType+"Ani";i.play(n);var c=t.addComponent("monster");c.setFishtidePos(t.x,t.y),c.FishtideGoldHp(this.monsterType)}},setLable:function(){cc.find("goldLabel").getComponent(cc.RichText).string="<color=#fff000>金币:</c><color=#fff000>"+o.gold+"</color>"},setPro:function(){var e=cc.find("fishTideBar").getComponent(cc.ProgressBar);cc.log(0),e.progress=0},update:function(e){var t=this,i=0;t.monsterList.forEach(function(e){var o=e.getComponent(cc.Sprite);if(0==cc.isValid(o)||0==o.node.active)return cc.log("remove"),t.node.removeChild(e),void t.monsterList.splice(i,1);i++})},addMonsterTow:function(){var e=new cc.Node;this.node.addChild(e);var t=e.addComponent(cc.Sprite);t.spriteFrame=new cc.SpriteFrame;cc.loader.loadRes("Fish/fish010_01",cc.SpriteFrame,function(e,i){e?cc.error(e.message||e):t.spriteFrame=i});var i=cc.view.getDesignResolutionSize();e.x=i.width/4,e.y=i.height/4;var o=e.addComponent(cc.Animation);cc.loader.loadRes("Fish/fishItem",cc.SpriteAtlas,function(e,t){var i=t.getSpriteFrames();i.length=0;for(var n=1;n<=10;n++){var c="fish010_0"+n,r=t.getSpriteFrame(c);i.push(r)}c="fish010_01",r=t.getSpriteFrame(c);i.push(r);var s=cc.AnimationClip.createWithSpriteFrames(i,10);s.name="run",s.wrapMode=cc.WrapMode.Loop,o.addClip(s),o.play("run")})}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}],monster:[function(e,t,i){"use strict";cc._RF.push(t,"d6914yUJHRF5IusRq7vpD2G","monster");var o=e("gLabelScript");cc.Class({extends:cc.Component,properties:{birthDir:0,monsterType:0,isDelete:!1,monsterHp:1,monsterGold:150,fishTidePosX:0,fishTidePosY:0},start:function(){this.move()},setMonsterType:function(e,t){this.monsterType=e,this.birthDir=t,this.monsterHp=4*e,this.monsterGold=150*e+50},FishtideGoldHp:function(e){this.monsterType=e,this.monsterHp=1,this.monsterGold=150*e+100},setFishtidePos:function(e,t){this.fishTidePosX=e,this.fishTidePosY=t},move:function(){var e=this,t=cc.view.getDesignResolutionSize(),i=void 0,n=void 0;if(o.isFishtide){i=1440,n=this.fishTidePosY,e.node.setRotation(90);var c=cc.moveTo(10,cc.v2(i,n));e.node.runAction(c)}else{0==o.monsterBirth?(i=parseInt(Math.random()*t.width),n=960):1==o.monsterBirth?(i=parseInt(Math.random()*t.width),n=-300):2==o.monsterBirth?(i=1440,n=parseInt(Math.random()*t.height)):3==o.monsterBirth&&(i=-300,n=parseInt(Math.random()*t.height));var r=e.getAngle(cc.v2(i,n),e.node.getPosition());e.node.setRotation(r);var s=e.node.x-i,a=e.node.y-n,d=cc.flipY(!0);e.node.runAction(d);var p=Math.sqrt(s*s+a*a),l=cc.moveTo(p/100,cc.v2(i,n));e.node.runAction(l)}},getAngle:function(e,t){var i=t.y-e.y,o=t.x-e.x,n=Math.abs(i)/Math.abs(o),c=0;return i>0&&o<0?c=180*Math.atan(n)/Math.PI-90:i>0&&o>0?c=90-180*Math.atan(n)/Math.PI:i<0&&o<0?c=180*-Math.atan(n)/Math.PI-90:i<0&&o>0&&(c=180*Math.atan(n)/Math.PI+90),c},removeSprite:function(){var e=this.getComponent(cc.Sprite);cc.isValid(e)&&(e.node.active=!1,this.isDelete=!0)},update:function(e){var t=this;t.isDelete||960!=t.node.y&&-300!=t.node.y&&1440!=t.node.x&&300!=t.node.x||(t.removeSprite(),this.isDelete=!0)},onCollisionEnter:function(e,t){if(1==e.tag&&(0==this.isDelete&&(cc.find("fishingNetMgr").getComponent("fishingNetMgr").addFishNet(this.node.x,this.node.y),this.monsterHp-=o.batteryLv,this.monsterHp<=0))){this.isDelete=!0;var i=this.node.getComponent(cc.Animation),n="fish0"+this.monsterType+"Ani",c="fish0"+this.monsterType+"Catch";i.stop(n),i.play(c),this.scheduleOnce(this.removeSprite,.3),cc.find("goldMgr").getComponent("GoldMgr").addGold(this.node.x,this.node.y),o.gold+=this.monsterGold,this.setLable(),0==o.isFishReward&&(o.fishTideCount++,this.setPro())}},setLable:function(){cc.find("goldLabel").getComponent(cc.RichText).string="<color=#fff000>金币:</c><color=#fff000>"+o.gold+"</color>"},setPro:function(){var e=cc.find("fishTideBar").getComponent(cc.ProgressBar),t=o.fishTideCount/o.fishTideTotal;(cc.log(t),e.progress=t,1==t)&&(o.isFishReward=!0,o.fishTideCount=0,cc.find("monsterMgr").getComponent("monsterMgr").stopMonster())}}),cc._RF.pop()},{gLabelScript:"gLabelScript"}]},{},["Battery","BatteryUp","Bullet","BulletMgr","GameLogo","GameMap","GameToSel","Gold","GoldMgr","Pro","SelectMap","SetAni","fishingNet","fishingNetMgr","forbidden","forbiddenMgr","gLabelScript","logo","monster","monsterMgr"]);